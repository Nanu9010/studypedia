<!-- university/templates/university/degree_form.html -->
{% extends 'base.html' %}

{% block content %}
  <div class="container">
    <h1>{% if serializer.instance %}Edit Degree{% else %}Create Degree{% endif %}</h1>
    {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
    <form method="post" class="form-group">
      {% csrf_token %}
      <div class="form-group">
        <label for="id_university">University:</label>
        <select name="university" id="id_university" required>
          <option value="">Select a university</option>
          {% for university in universities %}
            <option value="{{ university.pk }}" {% if serializer.data.university == university.pk %}selected{% endif %}>
              {{ university.name }}
            </option>
          {% endfor %}
        </select>
        {% if errors.university %}
          <span class="error">{{ errors.university|join:", " }}</span>
        {% endif %}
      </div>
      <div class="form-group">
        <label for="id_name">Name:</label>
        <input type="text" name="name" id="id_name" value="{{ serializer.data.name|default:'' }}" required>
        {% if errors.name %}
          <span class="error">{{ errors.name|join:", " }}</span>
        {% endif %}
      </div>
      <div class="form-group">
        <label for="id_abbreviation">Abbreviation:</label>
        <input type="text" name="abbreviation" id="id_abbreviation" value="{{ serializer.data.abbreviation|default:'' }}">
        {% if errors.abbreviation %}
          <span class="error">{{ errors.abbreviation|join:", " }}</span>
        {% endif %}
      </div>
      <div class="form-group">
        <label for="id_is_active">Active:</label>
        <input type="checkbox" name="is_active" id="id_is_active" {% if serializer.data.is_active|default:True %}checked{% endif %}>
        {% if errors.is_active %}
          <span class="error">{{ errors.is_active|join:", " }}</span>
        {% endif %}
      </div>
      <button type="submit" class="btn btn-primary">Save</button>
    </form>
    <a href="{% url 'university:degree_list' %}" class="btn btn-secondary">Back to List</a>
  </div>
{% endblock %}