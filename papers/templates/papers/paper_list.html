<!-- papers/templates/papers/paper_list.html -->
{% extends 'base.html' %}

{% block content %}
<div class="container">
  <h1>Papers</h1>

  {% if messages %}
  <div class="messages">
    {% for message in messages %}
      <div class="message {{ message.tags }}">{{ message }}</div>
    {% endfor %}
  </div>
  {% endif %}

  {% if user.is_staff %}
    <a href="{% url 'papers:paper_create' %}" class="btn btn-primary">Create Paper</a>
  {% endif %}

  <div class="grid grid-3">
    {% for paper in papers %}
      <div class="card">
        <h3>{{ paper.name }} - {{ paper.get_exam_type_display }} ({{ paper.year }})</h3>
        <p><strong>Code:</strong> {{ paper.code }}</p>
        <p><strong>University:</strong> {{ paper.branch.degree.university.name }}</p>
        <p><strong>Degree:</strong> {{ paper.branch.degree.name }}</p>
        <p><strong>Branch:</strong> {{ paper.branch.name }}</p>
        <p><strong>Price:</strong> â‚¹{{ paper.price }}</p>
        <p><strong>Credits:</strong> {{ paper.credit_price }}</p>
        <p><strong>Active:</strong> {{ paper.is_active|yesno:"Yes,No" }}</p>
        <a href="{% url 'ecommerce:add_to_cart' paper.pk %}?type=paper" class="btn btn-primary">Add to Cart</a>
        {% if user.is_staff %}
          <a href="{% url 'papers:paper_update' paper.pk %}" class="btn btn-primary">Edit</a>
          <a href="{% url 'papers:paper_delete' paper.pk %}" class="btn btn-secondary" onclick="return confirm('Are you sure you want to delete this paper?');">Delete</a>
        {% endif %}
      </div>
    {% empty %}
      <p>No papers found.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}